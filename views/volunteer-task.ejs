<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Details</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    
    <link rel="stylesheet" href="/styles/main.css" />
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="text-center mb-4"><%= task.title %></h1>
      <div class="card shadow">
        <div class="card-body">
          <p><strong>Location:</strong> <%= task.location %></p>
          <p><strong>Description:</strong> <%= task.description %></p>
          <p>
            <strong>From:</strong> <%= new Date(task.fromTime).toLocaleString()
            %>
          </p>
          <p>
            <strong>To:</strong> <%= new Date(task.toTime).toLocaleString() %>
          </p>
          <p><strong>Size:</strong> <%= task.size %> volunteers</p>
          <p><strong>Organization:</strong> <%= task.organization.name %></p>
          <p><strong>Contact:</strong> <%= task.organization.emailId %></p>
          <button class="btn btn-primary mt-3" onclick="registerTask('<%= task.id %>')">Register for Task</button>
    <script>
      function registerTask(taskId) {
        fetch(`/volunteer/task/${taskId}/register`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
        })
          .then(response => {
            if (response.ok) {
              alert('Successfully registered for the task!');
              window.location.href = '/volunteer/dashboard';
            } else {
              alert('Failed to register for the task.');
            }
          })
          .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while registering for the task.');
          });
      }
    </script>
          <a href="/volunteer/dashboard" class="btn btn-secondary"
            >Back to Dashboard</a
          >
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>